<!DOCTYPE html>
<html lang="{{if eq .Language "pt"}}pt-br{{else}}{{.Language}}{{end}}">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="https://sumtubestaticfiles.s3.us-east-1.amazonaws.com/favicon.ico?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIA3TGVKVPHJA6VC4EX%2F20250903%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250903T211801Z&X-Amz-Expires=300&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEOb%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLWVhc3QtMSJIMEYCIQDwCKHf0b%2FExK4qBueEdxOxVU6mzll%2BCUU0luzIObVjuAIhAKwk%2BELCQslcBDk0FE8XIAchcPwvs%2FNeqR43sSYWf6LUKtoCCE4QBRoMNzk3MTYzODI2MTI2IgyMluHtcfgBhGf%2F8lUqtwKmtUvvaMYtCPAORqA2OVeetq%2FOY5Qg1%2BuPT%2BVvHSOZiNFNJXXGIiuVM7aPvP1%2Fzzs3xz%2FDHE7Akc1642uNTqhTC%2BmK8l%2FkoGXKYm9JWb7wFXAFlO1luOhbCwX%2BDuDBTwpGS4e5ghy53nUQAWQBuWBVKKcmlhCvw%2BtI2jIPpB%2BkdOZoZWsJiQmwy4nFCNkmMlIcQwlnWD2sWtLSeco8YlDqNVlkXSa78JrHi7%2Bi1d8xZbLudm4QY1KrX02IIt2pVRvS7MQUTbH0fGmeG98qFhB3WTTd7mePeyOHQMKxuV4x4%2FiSizlCScmo1aUxC64xdruv0AdQP5r%2Bf6Lfd%2FLsNEKy2YzIq2rH7SjmQVwdCRGtHiHKs4VMqq4ioM8ClquiowEP9oetlMRYv5Xs2TITAHoRi2No6wvsTjCX0uLFBjqsAjbwCfq2weLtsRN%2FR%2Bad65WyMkFwrsl0gqt4qrx%2BCs1xRtsOGVyXhDO6Kn1b9g6Hg6Z%2Fv6csDKWItWTGrcqE4GMJLZDYAwHNdZNu%2FNu1PbN%2FG%2BNkpsWKES2GCC4nE5CG65y04uljx452EFkeREx9cmdmXbkmhD6SEJ%2BUhQcaurF8b1lvznQ3L6IppDyF9CayLVogjskUEIEcWXWMK4gsz%2F07v4t04yi5fdtl1CkZ4drrSb8UMoWbuvzYIF2rlnddVJcmwt3WC001vyDIVqHxexNnr0w4BDpPDZcZ7haWWmNQqP4loElNVQK85It%2BsbqUU49dKIDxgbFkSKfn18UIS0jCtM1VXuutH2cUYs7bh4jTZs%2F06LiuyYWExv5TVGhN4mVY2iqNDTWznDmIaw%3D%3D&X-Amz-Signature=41c7fca9106433a11a62dc2e115022f4f6459e7d5a4e17f2b0d87ecf57c254e5&X-Amz-SignedHeaders=host&response-content-disposition=inline" sizes="32x32">
    <title>Sumtube : {{.Title}}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .markdown a[href^="https://youtu.be"] {
        text-decoration: underline dashed #e63946;   
        transition: color 0.2s ease;
      }

      .markdown a[href^="https://youtu.be"]:hover {
        color: #d62828;
        text-decoration: underline solid;
      }     
    </style>
  </head>
  <body class="bg-gray-100 text-gray-800">
    <!-- Reused Header from Homepage -->
    <nav class="bg-red-600 p-4 text-white flex justify-between items-center">
      <h1 class="text-xl font-bold"><a href="{{.BaseUrl}}">YouTube Summarizer</a></h1>
      <button class="bg-white text-red-600 px-4 py-2 rounded">Login</button>
    </nav>

    <div class="max-w-6xl mx-auto p-4 lg:flex lg:gap-8">
      <!-- Main Content -->
      <main class="lg:w-2/3">
        <!-- Blog Header -->
        <img
          src="https://img.youtube.com/vi/{{.VideoId}}/0.jpg"
          alt="Video Cover"
          class="rounded-xl shadow mb-6 w-full"
        />

        <h1 class="text-3xl font-bold mb-2">
          {{.Title}}
        </h1>
        <p class="text-sm text-gray-500 mb-4 flex items-center gap-2">
          📅 {{.UploadDate}} • 🎥 {{.VideoDurationMinutes}} min vídeo →
          📖 {{.ReadingTimeMinutes}} min leitura •
          ⏱️ <span class="text-green-600 font-semibold">Você economiza {{.TimeSavedMinutes}} min</span>
        </p>

        <!-- Blog Content -->
        <article class="space-y-4 text-lg leading-relaxed">
          <i style="font-size: small;">{{.Answer}}</i>
        </article>

        <article class="space-y-4 text-lg leading-relaxed mt-3 markdown">
          {{.Content}}
        </article>

        <!-- Share Button -->
        <div class="mt-6">
          <button
            onclick="copyCurrentURL()"
            class="inline-block bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 flex items-center gap-2"
            id="shareButton"
          >
            🔗 Share this summary
          </button>
        </div>

        <script>
          function copyCurrentURL() {
            const currentURL = window.location.href;
            navigator.clipboard.writeText(currentURL).then(() => {
              const shareButton = document.getElementById('shareButton');
              const originalText = shareButton.innerHTML;
              shareButton.innerHTML = '✅ Copied!';
              setTimeout(() => {
                shareButton.innerHTML = originalText;
              }, 2000);
            }).catch(err => {
              console.error('Failed to copy URL:', err);
              alert('Failed to copy URL to clipboard');
            });
          }
        </script>

        <div class="max-w-2xl mx-auto mt-16 text-center pt-2 pb-2 bg-white">
          <h2 class="text-3xl font-bold">Summarize Any YouTube Video</h2>
          <p class="text-gray-600 mt-2">
            Enter a YouTube video URL and get an AI-generated summary.
          </p>

          <!-- React form mounts here -->
          <div
            id="react-root"
            class="mt-6 flex flex-col items-center justify-center gap-2 w-full"
            data-lang="{{.Language}}"
          >
            <!-- React replaces this -->
          </div>
        </div>

        <!-- Question Section -->
        <!-- <div class="mt-10 bg-white p-6 rounded-lg shadow-md">
          <h2 class="text-xl font-semibold mb-2">
            Have a question about the video?
          </h2>
          <p class="text-gray-600 mb-4">
            We'll use your question to improve this summary or create a new one.
          </p>
          <textarea
            class="w-full p-3 border rounded-lg resize-none"
            rows="4"
            placeholder="Type your question here..."
          ></textarea>
          <button
            class="mt-4 bg-red-600 text-white px-5 py-2 rounded hover:bg-red-700"
          >
            Submit
          </button>
        </div> -->
      </main>

      <!-- Related Videos Sidebar -->
      <aside class="lg:w-1/3 mt-10 lg:mt-0">
        <h3 class="text-lg font-semibold mb-4">📺 Related Videos</h3>
        <ul class="space-y-4">
          {{range .RelatedVideosArr}}
          <li class="flex gap-4 {{if eq .vid $.VideoId}}opacity-50{{end}}">
            <img
              src="https://img.youtube.com/vi/{{.vid}}/hqdefault.jpg"
              alt="{{.title}}"
              class="w-20 h-14 object-cover rounded"
            />
            <div>
              <a 
              href="{{$.BaseUrl}}/{{.lang}}/{{.vid}}/{{.path}}"  
              class="font-medium line-clamp-2 text-sm"
              title="{{.title}}"
              alt="{{.title}}">
                {{.title}}
              </a>
              <a 
                href="{{$.BaseUrl}}/{{.lang}}/{{.vid}}/{{.path}}" 
                class="text-sm text-red-600 hover:underline"
              >
                Watch Summary
              </a>
            </div>
          </li>
          {{end}}
        </ul>
      </aside>
    </div>
    <script type="module" src="/static/app.js"></script>
  </body>
</html>
